Same as:

https://github.com/me-cooper/esp8266-native-homekit-lamp

But with additional "Animation" Switch.